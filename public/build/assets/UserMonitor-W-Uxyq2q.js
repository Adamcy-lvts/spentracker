import{_ as B}from"./AppLayout.vue_vue_type_script_setup_true_lang-CEzETzRY.js";import{_ as p,a as v,b as x,c as b}from"./CardTitle.vue_vue_type_script_setup_true_lang-CzrlSzmg.js";import{a as M,d as F,_ as L}from"./index-Bu3ePNZp.js";import{d as U,j as m,o as r,r as V,n as j,u as e,c as S,h as T,a as w,w as t,l as i,b as $,g as s,q as o,p as n,F as P,s as h,P as C}from"./app-Dsgjp0SN.js";import{_ as z,a as E,d as N,e as _,b as R,c as f}from"./TableHeader.vue_vue_type_script_setup_true_lang-1kXp5-Dw.js";import"./useForwardExpose-lzpZVfui.js";import"./VisuallyHidden-DJ4QMdUu.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BZ7BVLyk.js";const q=U({__name:"CardDescription",props:{class:{}},setup(c){const g=c;return(u,y)=>(r(),m("p",{"data-slot":"card-description",class:j(e(M)("text-muted-foreground text-sm",g.class))},[V(u.$slots,"default")],2))}}),D=U({__name:"Badge",props:{class:{}},setup(c){const g=F("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),u=c,y=S(()=>M(g({variant:u.variant}),u.class));return(k,A)=>(r(),m("div",{class:j(y.value)},[V(k.$slots,"default")],2))}}),G={class:"container mx-auto p-6 space-y-6"},I={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded"},W={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},H={class:"text-2xl font-bold"},J={class:"text-2xl font-bold"},K={class:"text-2xl font-bold"},O={class:"text-2xl font-bold"},Q={class:"overflow-x-auto"},X={class:"font-medium"},Y={class:"text-sm text-muted-foreground"},Z={key:1,class:"text-sm text-muted-foreground"},tt={key:0,class:"text-xs text-muted-foreground"},et=["title"],ft=U({__name:"UserMonitor",props:{users:{},statistics:{}},setup(c){const g=c,u=T(""),y=d=>d?new Date(d).toLocaleString():"Never",k=d=>d?d.length>50?d.substring(0,50)+"...":d:"Unknown",A=d=>{C.patch(`/admin/users/${d.id}/toggle-admin`,{},{onSuccess:()=>{C.reload()},onError:l=>{u.value="Failed to toggle admin status"}})};return(d,l)=>(r(),w(B,null,{default:t(()=>[i("div",G,[l[13]||(l[13]=i("div",null,[i("h1",{class:"text-3xl font-bold"},"User Monitor Dashboard"),i("p",{class:"text-muted-foreground"},"Monitor user activity, login tracking, and manage admin roles")],-1)),u.value?(r(),m("div",I,o(u.value),1)):$("",!0),i("div",W,[s(e(p),null,{default:t(()=>[s(e(v),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:t(()=>[s(e(x),{class:"text-sm font-medium"},{default:t(()=>l[0]||(l[0]=[n("Total Users",-1)])),_:1,__:[0]})]),_:1}),s(e(b),null,{default:t(()=>[i("div",H,o(d.statistics.total_users),1)]),_:1})]),_:1}),s(e(p),null,{default:t(()=>[s(e(v),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:t(()=>[s(e(x),{class:"text-sm font-medium"},{default:t(()=>l[1]||(l[1]=[n("Admin Users",-1)])),_:1,__:[1]})]),_:1}),s(e(b),null,{default:t(()=>[i("div",J,o(d.statistics.admin_users),1)]),_:1})]),_:1}),s(e(p),null,{default:t(()=>[s(e(v),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:t(()=>[s(e(x),{class:"text-sm font-medium"},{default:t(()=>l[2]||(l[2]=[n("Active This Week",-1)])),_:1,__:[2]})]),_:1}),s(e(b),null,{default:t(()=>[i("div",K,o(d.statistics.active_users_last_week),1)]),_:1})]),_:1}),s(e(p),null,{default:t(()=>[s(e(v),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:t(()=>[s(e(x),{class:"text-sm font-medium"},{default:t(()=>l[3]||(l[3]=[n("New This Month",-1)])),_:1,__:[3]})]),_:1}),s(e(b),null,{default:t(()=>[i("div",O,o(d.statistics.new_users_this_month),1)]),_:1})]),_:1})]),s(e(p),null,{default:t(()=>[s(e(v),null,{default:t(()=>[s(e(x),null,{default:t(()=>l[4]||(l[4]=[n("User Activity Monitor",-1)])),_:1,__:[4]}),s(e(q),null,{default:t(()=>l[5]||(l[5]=[n("Track user logins, locations, and manage admin roles",-1)])),_:1,__:[5]})]),_:1}),s(e(b),null,{default:t(()=>[i("div",Q,[s(e(z),null,{default:t(()=>[s(e(E),null,{default:t(()=>[s(e(N),null,{default:t(()=>[s(e(_),null,{default:t(()=>l[6]||(l[6]=[n("User",-1)])),_:1,__:[6]}),s(e(_),null,{default:t(()=>l[7]||(l[7]=[n("Role",-1)])),_:1,__:[7]}),s(e(_),null,{default:t(()=>l[8]||(l[8]=[n("Device",-1)])),_:1,__:[8]}),s(e(_),null,{default:t(()=>l[9]||(l[9]=[n("Last Login",-1)])),_:1,__:[9]}),s(e(_),null,{default:t(()=>l[10]||(l[10]=[n("Location",-1)])),_:1,__:[10]}),s(e(_),null,{default:t(()=>l[11]||(l[11]=[n("IP Address",-1)])),_:1,__:[11]}),s(e(_),null,{default:t(()=>l[12]||(l[12]=[n("Actions",-1)])),_:1,__:[12]})]),_:1})]),_:1}),s(e(R),null,{default:t(()=>[(r(!0),m(P,null,h(g.users,a=>(r(),w(e(N),{key:a.id},{default:t(()=>[s(e(f),null,{default:t(()=>[i("div",null,[i("div",X,o(a.name),1),i("div",Y,o(a.email),1)])]),_:2},1024),s(e(f),null,{default:t(()=>[s(e(D),{variant:a.is_admin?"destructive":"secondary"},{default:t(()=>[n(o(a.is_admin?"Admin":"User"),1)]),_:2},1032,["variant"])]),_:2},1024),s(e(f),null,{default:t(()=>[a.last_login_device_type?(r(),w(e(D),{key:0,variant:"outline"},{default:t(()=>[n(o(a.last_login_device_type),1)]),_:2},1024)):(r(),m("span",Z,"Unknown"))]),_:2},1024),s(e(f),null,{default:t(()=>[n(o(y(a.last_login_at)),1)]),_:2},1024),s(e(f),null,{default:t(()=>[i("div",null,[n(o(a.last_login_location||"Unknown")+" ",1),a.last_login_latitude&&a.last_login_longitude?(r(),m("div",tt," GPS: "+o(a.last_login_latitude?.toFixed(4))+", "+o(a.last_login_longitude?.toFixed(4)),1)):$("",!0)])]),_:2},1024),s(e(f),null,{default:t(()=>[i("div",null,[n(o(a.last_login_ip||"N/A")+" ",1),a.last_login_user_agent?(r(),m("div",{key:0,class:"text-xs text-muted-foreground",title:a.last_login_user_agent},o(k(a.last_login_user_agent)),9,et)):$("",!0)])]),_:2},1024),s(e(f),null,{default:t(()=>[s(e(L),{size:"sm",variant:a.is_admin?"outline":"default",onClick:st=>A(a)},{default:t(()=>[n(o(a.is_admin?"Remove Admin":"Make Admin"),1)]),_:2},1032,["variant","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1})]),_:1})])]),_:1}))}});export{ft as default};
