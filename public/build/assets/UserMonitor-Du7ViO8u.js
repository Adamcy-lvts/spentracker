import{k as T}from"./AppLayout.vue_vue_type_script_setup_true_lang-BzMhJDHG.js";import{_ as f,a as c}from"./CardContent.vue_vue_type_script_setup_true_lang-CwUytZ78.js";import{a as B,b as E,_ as P}from"./index-qBfqnD8L.js";import{d as U,b,o as u,s as L,g as N,u as t,c as C,r as z,m as w,w as e,f as i,e as A,h as s,t as o,k as l,F as I,l as O,a as D}from"./app-B2PDcKP3.js";import{_ as m,a as p}from"./CardTitle.vue_vue_type_script_setup_true_lang-B458Fkz2.js";import{_ as W,a as G,d as M,e as g,b as Z,c as v}from"./TableHeader.vue_vue_type_script_setup_true_lang-nOTk1QLg.js";import{C as q,a as H,L as J,B as K,p as Q,b as X,c as Y,A as tt,P as et,d as st}from"./index-B4meDyTZ.js";import"./Label.vue_vue_type_script_setup_true_lang-GCRVZXHe.js";import"./check-T1Bu_J4F.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DPSL5pC-.js";import"./PwaInstallPrompt-Cvz41DQN.js";const $=U({__name:"CardDescription",props:{class:{}},setup(x){const d=x;return(_,y)=>(u(),b("p",{"data-slot":"card-description",class:N(t(B)("text-muted-foreground text-sm",d.class))},[L(_.$slots,"default")],2))}}),S=U({__name:"Badge",props:{class:{}},setup(x){const d=E("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),_=x,y=C(()=>B(d({variant:_.variant}),_.class));return(k,h)=>(u(),b("div",{class:N(y.value)},[L(k.$slots,"default")],2))}}),at={class:"container mx-auto p-6 space-y-6"},lt={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded"},nt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},it={class:"text-2xl font-bold"},ot={class:"text-2xl font-bold"},rt={class:"text-2xl font-bold"},dt={class:"text-2xl font-bold"},ut={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},_t={class:"h-[300px] flex items-center justify-center"},ft={class:"h-[300px]"},ct={class:"overflow-x-auto"},mt={class:"font-medium"},pt={class:"text-sm text-muted-foreground"},gt={key:1,class:"text-sm text-muted-foreground"},vt={key:0,class:"text-xs text-muted-foreground"},bt=["title"],Bt=U({__name:"UserMonitor",props:{users:{},statistics:{}},setup(x){const d=x,_=z(""),y=r=>r?new Date(r).toLocaleString():"Never",k=r=>r?r.length>50?r.substring(0,50)+"...":r:"Unknown",h=r=>{D.patch(`/admin/users/${r.id}/toggle-admin`,{},{onSuccess:()=>{D.reload()},onError:a=>{_.value="Failed to toggle admin status"}})};q.register(H,J,K,Q,X,Y,tt);const R={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"}}},V={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}},j=C(()=>({labels:["Active (Last Month)","Inactive"],datasets:[{backgroundColor:["#22c55e","#94a3b8"],data:[d.statistics.active_users_last_month,d.statistics.inactive_users]}]})),F=C(()=>({labels:["Active (Week)","Active (Month)","New (Month)"],datasets:[{label:"Users",backgroundColor:["#3b82f6","#8b5cf6","#eab308"],data:[d.statistics.active_users_last_week,d.statistics.active_users_last_month,d.statistics.new_users_this_month],borderRadius:4}]}));return(r,a)=>(u(),w(T,null,{default:e(()=>[i("div",at,[a[17]||(a[17]=i("div",null,[i("h1",{class:"text-3xl font-bold"},"User Monitor Dashboard"),i("p",{class:"text-muted-foreground"},"Monitor user activity, login tracking, and manage admin roles")],-1)),_.value?(u(),b("div",lt,o(_.value),1)):A("",!0),i("div",nt,[s(t(f),null,{default:e(()=>[s(t(m),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:e(()=>[s(t(p),{class:"text-sm font-medium"},{default:e(()=>a[0]||(a[0]=[l("Total Users",-1)])),_:1,__:[0]})]),_:1}),s(t(c),null,{default:e(()=>[i("div",it,o(r.statistics.total_users),1)]),_:1})]),_:1}),s(t(f),null,{default:e(()=>[s(t(m),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:e(()=>[s(t(p),{class:"text-sm font-medium"},{default:e(()=>a[1]||(a[1]=[l("Admin Users",-1)])),_:1,__:[1]})]),_:1}),s(t(c),null,{default:e(()=>[i("div",ot,o(r.statistics.admin_users),1)]),_:1})]),_:1}),s(t(f),null,{default:e(()=>[s(t(m),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:e(()=>[s(t(p),{class:"text-sm font-medium"},{default:e(()=>a[2]||(a[2]=[l("Active This Week",-1)])),_:1,__:[2]})]),_:1}),s(t(c),null,{default:e(()=>[i("div",rt,o(r.statistics.active_users_last_week),1)]),_:1})]),_:1}),s(t(f),null,{default:e(()=>[s(t(m),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:e(()=>[s(t(p),{class:"text-sm font-medium"},{default:e(()=>a[3]||(a[3]=[l("New This Month",-1)])),_:1,__:[3]})]),_:1}),s(t(c),null,{default:e(()=>[i("div",dt,o(r.statistics.new_users_this_month),1)]),_:1})]),_:1})]),i("div",ut,[s(t(f),null,{default:e(()=>[s(t(m),null,{default:e(()=>[s(t(p),null,{default:e(()=>a[4]||(a[4]=[l("User Status Distribution",-1)])),_:1,__:[4]}),s(t($),null,{default:e(()=>a[5]||(a[5]=[l("Active vs Inactive Users",-1)])),_:1,__:[5]})]),_:1}),s(t(c),null,{default:e(()=>[i("div",_t,[s(t(et),{data:j.value,options:R},null,8,["data"])])]),_:1})]),_:1}),s(t(f),null,{default:e(()=>[s(t(m),null,{default:e(()=>[s(t(p),null,{default:e(()=>a[6]||(a[6]=[l("Activity Overview",-1)])),_:1,__:[6]}),s(t($),null,{default:e(()=>a[7]||(a[7]=[l("Recent user engagement metrics",-1)])),_:1,__:[7]})]),_:1}),s(t(c),null,{default:e(()=>[i("div",ft,[s(t(st),{data:F.value,options:V},null,8,["data"])])]),_:1})]),_:1})]),s(t(f),null,{default:e(()=>[s(t(m),null,{default:e(()=>[s(t(p),null,{default:e(()=>a[8]||(a[8]=[l("User Activity Monitor",-1)])),_:1,__:[8]}),s(t($),null,{default:e(()=>a[9]||(a[9]=[l("Track user logins, locations, and manage admin roles",-1)])),_:1,__:[9]})]),_:1}),s(t(c),null,{default:e(()=>[i("div",ct,[s(t(W),null,{default:e(()=>[s(t(G),null,{default:e(()=>[s(t(M),null,{default:e(()=>[s(t(g),null,{default:e(()=>a[10]||(a[10]=[l("User",-1)])),_:1,__:[10]}),s(t(g),null,{default:e(()=>a[11]||(a[11]=[l("Role",-1)])),_:1,__:[11]}),s(t(g),null,{default:e(()=>a[12]||(a[12]=[l("Device",-1)])),_:1,__:[12]}),s(t(g),null,{default:e(()=>a[13]||(a[13]=[l("Last Login",-1)])),_:1,__:[13]}),s(t(g),null,{default:e(()=>a[14]||(a[14]=[l("Location",-1)])),_:1,__:[14]}),s(t(g),null,{default:e(()=>a[15]||(a[15]=[l("IP Address",-1)])),_:1,__:[15]}),s(t(g),null,{default:e(()=>a[16]||(a[16]=[l("Actions",-1)])),_:1,__:[16]})]),_:1})]),_:1}),s(t(Z),null,{default:e(()=>[(u(!0),b(I,null,O(d.users,n=>(u(),w(t(M),{key:n.id},{default:e(()=>[s(t(v),null,{default:e(()=>[i("div",null,[i("div",mt,o(n.name),1),i("div",pt,o(n.email),1)])]),_:2},1024),s(t(v),null,{default:e(()=>[s(t(S),{variant:n.is_admin?"destructive":"secondary"},{default:e(()=>[l(o(n.is_admin?"Admin":"User"),1)]),_:2},1032,["variant"])]),_:2},1024),s(t(v),null,{default:e(()=>[n.last_login_device_type?(u(),w(t(S),{key:0,variant:"outline"},{default:e(()=>[l(o(n.last_login_device_type),1)]),_:2},1024)):(u(),b("span",gt,"Unknown"))]),_:2},1024),s(t(v),null,{default:e(()=>[l(o(y(n.last_login_at)),1)]),_:2},1024),s(t(v),null,{default:e(()=>[i("div",null,[l(o(n.last_login_location||"Unknown")+" ",1),n.last_login_latitude&&n.last_login_longitude?(u(),b("div",vt," GPS: "+o(n.last_login_latitude?.toFixed(4))+", "+o(n.last_login_longitude?.toFixed(4)),1)):A("",!0)])]),_:2},1024),s(t(v),null,{default:e(()=>[i("div",null,[l(o(n.last_login_ip||"N/A")+" ",1),n.last_login_user_agent?(u(),b("div",{key:0,class:"text-xs text-muted-foreground",title:n.last_login_user_agent},o(k(n.last_login_user_agent)),9,bt)):A("",!0)])]),_:2},1024),s(t(v),null,{default:e(()=>[s(t(P),{size:"sm",variant:n.is_admin?"outline":"default",onClick:xt=>h(n)},{default:e(()=>[l(o(n.is_admin?"Remove Admin":"Make Admin"),1)]),_:2},1032,["variant","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1})]),_:1})])]),_:1}))}});export{Bt as default};
