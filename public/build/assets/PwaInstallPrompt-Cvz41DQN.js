import{r as u,M as I,a1 as C,c as w,d as S,b as m,o as v,F as _,h as f,T as x,w as b,e as g,u as n,f as e,k as j}from"./app-B2PDcKP3.js";import{_ as h,a as P}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DPSL5pC-.js";const k="pwa-install-dismissed-at",B=14,L=()=>typeof window>"u"?!1:/iphone|ipad|ipod/i.test(window.navigator.userAgent),A=()=>{if(typeof window>"u")return!1;const o=window.navigator;return window.matchMedia("(display-mode: standalone)").matches||o.standalone===!0},D=()=>{if(typeof window>"u")return!1;const o=window.localStorage.getItem(k);if(!o)return!1;const s=Number(o);if(Number.isNaN(s))return!1;const l=B*24*60*60*1e3;return Date.now()-s<l},N=()=>{const o=u(null),s=u(!1),l=u(!1),d=u(!1),r=u(!1),c=i=>{i.preventDefault(),o.value=i,s.value=!0},p=()=>{l.value=!0,o.value=null,s.value=!1},t=()=>{d.value=!0,typeof window<"u"&&window.localStorage.setItem(k,String(Date.now()))},a=async()=>{if(!o.value)return{outcome:"dismissed"};await o.value.prompt();const i=await o.value.userChoice;return i.outcome==="accepted"&&(l.value=!0,o.value=null,s.value=!1),i};I(()=>{r.value=L(),l.value=A(),d.value=D(),window.addEventListener("beforeinstallprompt",c),window.addEventListener("appinstalled",p)}),C(()=>{typeof window>"u"||(window.removeEventListener("beforeinstallprompt",c),window.removeEventListener("appinstalled",p))});const y=w(()=>!l.value&&!d.value&&s.value),M=w(()=>!l.value&&!d.value&&r.value&&!s.value);return{showPrompt:y,showIosPrompt:M,requestInstall:a,hidePrompt:t}},z={key:0,class:"fixed bottom-4 right-4 z-50 w-[320px] max-w-[calc(100vw-2rem)] rounded-2xl border border-border bg-background/95 p-4 shadow-2xl backdrop-blur sm:bottom-6 sm:right-6"},T={class:"flex items-start justify-between gap-4"},V={class:"flex items-start gap-3"},E={class:"flex h-12 w-12 items-center justify-center rounded-xl border border-border bg-muted/40"},H={class:"mt-4 flex items-center justify-between gap-2"},q={key:0,class:"fixed bottom-4 right-4 z-50 w-[320px] max-w-[calc(100vw-2rem)] rounded-2xl border border-border bg-background/95 p-4 shadow-2xl backdrop-blur sm:bottom-6 sm:right-6"},F={class:"flex items-start justify-between gap-4"},U={class:"flex items-start gap-3"},G={class:"flex h-12 w-12 items-center justify-center rounded-xl border border-border bg-muted/40"},O={class:"mt-4 flex items-center justify-end"},Y=S({__name:"PwaInstallPrompt",setup(o){const{showPrompt:s,showIosPrompt:l,requestInstall:d,hidePrompt:r}=N(),c=async()=>{(await d()).outcome!=="accepted"&&r()};return(p,t)=>(v(),m(_,null,[f(x,{name:"fade"},{default:b(()=>[n(s)?(v(),m("div",z,[e("div",T,[e("div",V,[e("div",E,[f(h,{class:"h-7 w-7 fill-current text-foreground"})]),t[4]||(t[4]=e("div",null,[e("p",{class:"text-sm font-semibold text-foreground"},"Install SpendTracker"),e("p",{class:"text-xs text-muted-foreground"},"Get the full app experience")],-1))]),e("button",{type:"button",class:"rounded-full border border-transparent p-1 text-muted-foreground transition hover:border-border hover:text-foreground",onClick:t[0]||(t[0]=(...a)=>n(r)&&n(r)(...a)),"aria-label":"Close"},t[5]||(t[5]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t[7]||(t[7]=e("div",{class:"mt-4 space-y-2 text-xs text-muted-foreground"},[e("div",{class:"flex items-center gap-2"},[e("svg",{class:"h-4 w-4 text-foreground/70",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})]),e("span",null,"Launch from your home screen")]),e("div",{class:"flex items-center gap-2"},[e("svg",{class:"h-4 w-4 text-foreground/70",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),e("span",null,"Faster loading and performance")]),e("div",{class:"flex items-center gap-2"},[e("svg",{class:"h-4 w-4 text-foreground/70",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"})]),e("span",null,"Access your work offline")])],-1)),e("div",H,[e("button",{type:"button",class:"rounded-lg border border-border px-3 py-2 text-xs font-semibold text-foreground transition hover:bg-muted",onClick:t[1]||(t[1]=(...a)=>n(r)&&n(r)(...a))}," Maybe later "),e("button",{type:"button",class:"flex items-center gap-2 rounded-lg bg-foreground px-4 py-2 text-xs font-semibold text-background transition hover:opacity-90",onClick:c},t[6]||(t[6]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v12m0 0l4-4m-4 4l-4-4M4 17v2a2 2 0 002 2h12a2 2 0 002-2v-2"})],-1),j(" Install App ",-1)]))])])):g("",!0)]),_:1}),f(x,{name:"fade"},{default:b(()=>[n(l)?(v(),m("div",q,[e("div",F,[e("div",U,[e("div",G,[f(h,{class:"h-7 w-7 fill-current text-foreground"})]),t[8]||(t[8]=e("div",null,[e("p",{class:"text-sm font-semibold text-foreground"},"Install on iOS"),e("p",{class:"text-xs text-muted-foreground"},"Add to Home Screen")],-1))]),e("button",{type:"button",class:"rounded-full border border-transparent p-1 text-muted-foreground transition hover:border-border hover:text-foreground",onClick:t[2]||(t[2]=(...a)=>n(r)&&n(r)(...a)),"aria-label":"Close"},t[9]||(t[9]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t[10]||(t[10]=e("div",{class:"mt-4 space-y-2 text-xs text-muted-foreground"},[e("div",{class:"flex items-center gap-2"},[e("svg",{class:"h-4 w-4 text-foreground/70",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 12h16m-8-8v16"})]),e("span",null,"Tap Share, then “Add to Home Screen”")]),e("div",{class:"flex items-center gap-2"},[e("svg",{class:"h-4 w-4 text-foreground/70",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})]),e("span",null,"Open quickly from your home screen")]),e("div",{class:"flex items-center gap-2"},[e("svg",{class:"h-4 w-4 text-foreground/70",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"})]),e("span",null,"Use it even when offline")])],-1)),e("div",O,[e("button",{type:"button",class:"rounded-lg border border-border px-3 py-2 text-xs font-semibold text-foreground transition hover:bg-muted",onClick:t[3]||(t[3]=(...a)=>n(r)&&n(r)(...a))}," Got it ")])])):g("",!0)]),_:1})],64))}}),$=P(Y,[["__scopeId","data-v-de76811b"]]);export{$ as P};
